# Supabase æ•°æ®åº“é…ç½®æŒ‡å—

## âœ… å·²å®Œæˆçš„å·¥ä½œ

1. âœ… åœ¨ `package.json` ä¸­æ·»åŠ äº† `@supabase/supabase-js` ä¾èµ–
2. âœ… æ›´æ–°äº† `api/users.ts` ä½¿ç”¨ Supabase å­˜å‚¨
3. âœ… åˆ›å»ºäº†æ•°æ®åº“è¡¨ç»“æ„ SQL æ–‡ä»¶ `supabase-schema.sql`

## ğŸ“‹ é…ç½®æ­¥éª¤

### æ­¥éª¤ 1ï¼šåˆ›å»º Supabase é¡¹ç›®

1. è®¿é—® [Supabase Dashboard](https://app.supabase.com/)
2. ç™»å½•æˆ–æ³¨å†Œè´¦å·
3. ç‚¹å‡» **New Project**
4. å¡«å†™é¡¹ç›®ä¿¡æ¯ï¼š
   - **Name**: `marvel-education-hub`ï¼ˆæˆ–ä½ å–œæ¬¢çš„åç§°ï¼‰
   - **Database Password**: è®¾ç½®ä¸€ä¸ªå¼ºå¯†ç ï¼ˆ**è¯·ä¿å­˜å¥½ï¼Œåç»­éœ€è¦ç”¨åˆ°**ï¼‰
   - **Region**: é€‰æ‹©ç¦»ç”¨æˆ·æœ€è¿‘çš„åŒºåŸŸï¼ˆå¦‚ `Southeast Asia (Singapore)`ï¼‰
5. ç‚¹å‡» **Create new project**
6. ç­‰å¾…é¡¹ç›®åˆ›å»ºå®Œæˆï¼ˆçº¦ 2-3 åˆ†é’Ÿï¼‰

### æ­¥éª¤ 2ï¼šåˆ›å»ºæ•°æ®åº“è¡¨

1. åœ¨ Supabase Dashboard ä¸­ï¼Œè¿›å…¥ä½ çš„é¡¹ç›®
2. ç‚¹å‡»å·¦ä¾§èœå•çš„ **SQL Editor**
3. ç‚¹å‡» **New query**
4. å¤åˆ¶ `supabase-schema.sql` æ–‡ä»¶ä¸­çš„æ‰€æœ‰å†…å®¹
5. ç²˜è´´åˆ° SQL Editor ä¸­
6. ç‚¹å‡» **Run** æˆ–æŒ‰ `Ctrl+Enter`ï¼ˆMac: `Cmd+Enter`ï¼‰
7. ç¡®è®¤æ‰§è¡ŒæˆåŠŸï¼ˆåº”è¯¥çœ‹åˆ° "Success. No rows returned"ï¼‰

### æ­¥éª¤ 3ï¼šè·å– API å¯†é’¥

1. åœ¨ Supabase Dashboard ä¸­ï¼Œç‚¹å‡»å·¦ä¾§èœå•çš„ **Settings**ï¼ˆé½¿è½®å›¾æ ‡ï¼‰
2. ç‚¹å‡» **API**
3. æ‰¾åˆ°ä»¥ä¸‹ä¿¡æ¯ï¼š
   - **Project URL**ï¼ˆä¾‹å¦‚ï¼š`https://xxxxx.supabase.co`ï¼‰
   - **anon public** keyï¼ˆåœ¨ **Project API keys** éƒ¨åˆ†ï¼‰

### æ­¥éª¤ 4ï¼šé…ç½® Vercel ç¯å¢ƒå˜é‡

1. ç™»å½• [Vercel Dashboard](https://vercel.com/dashboard)
2. é€‰æ‹©é¡¹ç›®ï¼š`marvel-education-hub`
3. è¿›å…¥ **Settings** â†’ **Environment Variables**
4. æ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

   **å˜é‡ 1ï¼š**
   - Name: `SUPABASE_URL`
   - Value: ä» Supabase Dashboard å¤åˆ¶çš„ **Project URL**
   - Environment: é€‰æ‹©æ‰€æœ‰ç¯å¢ƒï¼ˆProduction, Preview, Developmentï¼‰

   **å˜é‡ 2ï¼š**
   - Name: `SUPABASE_ANON_KEY`
   - Value: ä» Supabase Dashboard å¤åˆ¶çš„ **anon public** key
   - Environment: é€‰æ‹©æ‰€æœ‰ç¯å¢ƒï¼ˆProduction, Preview, Developmentï¼‰

### æ­¥éª¤ 5ï¼šé‡æ–°éƒ¨ç½²

1. æ¨é€ä»£ç åˆ° GitHubï¼ˆå¦‚æœè¿˜æ²¡æ¨é€ï¼‰
2. Vercel ä¼šè‡ªåŠ¨æ£€æµ‹åˆ°æ–°çš„æäº¤å¹¶é‡æ–°éƒ¨ç½²
3. æˆ–è€…æ‰‹åŠ¨è§¦å‘éƒ¨ç½²ï¼šåœ¨ Vercel Dashboard ç‚¹å‡» **Deployments** â†’ **Redeploy**

## ğŸ§ª éªŒè¯é…ç½®

éƒ¨ç½²å®Œæˆåï¼Œæµ‹è¯•ä»¥ä¸‹åŠŸèƒ½ï¼š

1. **æ³¨å†Œæ–°ç”¨æˆ·**ï¼šåœ¨è®¾å¤‡ A æ³¨å†Œä¸€ä¸ªæ–°è´¦å·
2. **æŸ¥çœ‹ç®¡ç†å‘˜åå°**ï¼šåœ¨è®¾å¤‡ B ç™»å½•ç®¡ç†å‘˜è´¦å·
3. **éªŒè¯åŒæ­¥**ï¼šåº”è¯¥èƒ½çœ‹åˆ°è®¾å¤‡ A æ³¨å†Œçš„ç”¨æˆ·

å¦‚æœçœ‹åˆ°ç”¨æˆ·æ•°æ®ï¼Œè¯´æ˜ Supabase é…ç½®æˆåŠŸï¼

## ğŸ“Š Supabase å…è´¹é¢åº¦

Supabase å…è´¹è®¡åˆ’åŒ…æ‹¬ï¼š
- **500 MB æ•°æ®åº“å­˜å‚¨**
- **2 GB å¸¦å®½/æœˆ**
- **50,000 æ¬¡ API è¯·æ±‚/æœˆ**
- **æ— é™ API è¯·æ±‚**ï¼ˆåœ¨å…è´¹é¢åº¦å†…ï¼‰

å¯¹äº 100 ä½ç”¨æˆ·ï¼Œè¿™ä¸ªé¢åº¦å®Œå…¨è¶³å¤Ÿä½¿ç”¨ã€‚

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜ï¼šç”¨æˆ·æ•°æ®æ— æ³•ä¿å­˜

**æ£€æŸ¥æ¸…å•**ï¼š
1. âœ… æ˜¯å¦åœ¨ Supabase Dashboard åˆ›å»ºäº†æ•°æ®åº“è¡¨ï¼Ÿ
2. âœ… ç¯å¢ƒå˜é‡ `SUPABASE_URL` å’Œ `SUPABASE_ANON_KEY` æ˜¯å¦å­˜åœ¨ï¼Ÿ
3. âœ… ç¯å¢ƒå˜é‡å€¼æ˜¯å¦æ­£ç¡®ï¼ˆæ²¡æœ‰å¤šä½™ç©ºæ ¼ï¼‰ï¼Ÿ
4. âœ… æ˜¯å¦é‡æ–°éƒ¨ç½²äº†åº”ç”¨ï¼Ÿ
5. âœ… æŸ¥çœ‹ Vercel éƒ¨ç½²æ—¥å¿—æ˜¯å¦æœ‰é”™è¯¯

### é—®é¢˜ï¼šéƒ¨ç½²æ—¶å‡ºç°é”™è¯¯

**å¯èƒ½åŸå› **ï¼š
- `@supabase/supabase-js` ä¾èµ–æœªå®‰è£… â†’ æ£€æŸ¥ `package.json` æ˜¯å¦åŒ…å«è¯¥ä¾èµ–
- Supabase ç¯å¢ƒå˜é‡æœªé…ç½® â†’ åœ¨ Vercel Dashboard æ·»åŠ ç¯å¢ƒå˜é‡
- æ•°æ®åº“è¡¨æœªåˆ›å»º â†’ åœ¨ Supabase SQL Editor ä¸­æ‰§è¡Œ `supabase-schema.sql`

### é—®é¢˜ï¼šRow Level Security (RLS) é”™è¯¯

å¦‚æœé‡åˆ°æƒé™é”™è¯¯ï¼Œæ£€æŸ¥ï¼š
1. åœ¨ Supabase Dashboard ä¸­ï¼Œè¿›å…¥ **Authentication** â†’ **Policies**
2. ç¡®è®¤ `users` è¡¨çš„ç­–ç•¥å·²æ­£ç¡®åˆ›å»º
3. å¦‚æœéœ€è¦ï¼Œå¯ä»¥ä¸´æ—¶ç¦ç”¨ RLS è¿›è¡Œæµ‹è¯•ï¼ˆä¸æ¨èç”Ÿäº§ç¯å¢ƒï¼‰

## ğŸ“ æ•°æ®åº“è¡¨ç»“æ„è¯´æ˜

### users è¡¨å­—æ®µ

- `id`: ç”¨æˆ·å”¯ä¸€æ ‡è¯†ï¼ˆä¸»é”®ï¼‰
- `username`: ç”¨æˆ·åï¼ˆå”¯ä¸€ï¼‰
- `email`: é‚®ç®±ï¼ˆå”¯ä¸€ï¼‰
- `name`: æ˜¾ç¤ºåç§°
- `password`: å¯†ç ï¼ˆå®é™…åº”ç”¨ä¸­åº”ä½¿ç”¨å“ˆå¸Œï¼‰
- `audit_status`: å®¡æ ¸çŠ¶æ€ï¼ˆ0=å¾…å®¡æ ¸, 1=å·²é€šè¿‡, 2=å·²æ‹’ç»ï¼‰
- `role`: ç”¨æˆ·è§’è‰²ï¼ˆuser=æ™®é€šç”¨æˆ·, admin=ç®¡ç†å‘˜ï¼‰
- `identity`: ç”¨æˆ·èº«ä»½æ•°ç»„ï¼ˆconsultant=é¡¾é—®, teacher=æ•™å¸ˆï¼‰
- `create_time`: åˆ›å»ºæ—¶é—´
- `created_at`: åˆ›å»ºæ—¶é—´ï¼ˆå…¼å®¹å­—æ®µï¼‰

## ğŸ‰ å®Œæˆï¼

é…ç½®å®Œæˆåï¼Œä½ çš„åº”ç”¨å°†æ‹¥æœ‰ï¼š
- âœ… æŒä¹…åŒ–çš„ç”¨æˆ·æ•°æ®å­˜å‚¨ï¼ˆPostgreSQLï¼‰
- âœ… è·¨è®¾å¤‡æ•°æ®åŒæ­¥
- âœ… å¼ºå¤§çš„æŸ¥è¯¢èƒ½åŠ›ï¼ˆSQLï¼‰
- âœ… é€‚åˆ 100+ ç”¨æˆ·çš„ç”Ÿäº§çº§å­˜å‚¨æ–¹æ¡ˆ
- âœ… å…è´¹é¢åº¦å……è¶³

## ğŸ” å®‰å…¨æç¤º

âš ï¸ **é‡è¦**ï¼š
- `SUPABASE_ANON_KEY` æ˜¯å…¬å¼€çš„ï¼Œä¼šè¢«æ‰“åŒ…åˆ°å‰ç«¯ä»£ç ä¸­
- ä½†é€šè¿‡ Row Level Security (RLS) ç­–ç•¥ï¼Œå¯ä»¥æ§åˆ¶æ•°æ®è®¿é—®æƒé™
- å½“å‰é…ç½®å…è®¸æ‰€æœ‰äººè¯»å–å’Œå†™å…¥ç”¨æˆ·æ•°æ®ï¼ˆé€‚åˆå½“å‰åœºæ™¯ï¼‰
- å¦‚æœæœªæ¥éœ€è¦æ›´ä¸¥æ ¼çš„æƒé™æ§åˆ¶ï¼Œå¯ä»¥ä¿®æ”¹ RLS ç­–ç•¥

å¦‚æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ [Supabase å®˜æ–¹æ–‡æ¡£](https://supabase.com/docs) æˆ–è”ç³»æ”¯æŒã€‚
